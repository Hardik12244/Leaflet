<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaflet</title>
    <%- include('./partials/head') %>
</head>

<style>
    body {
        background-image: url('/assets/eachBlog.png');
        
    }

    .main {
        max-width: 90%;
        margin-top: 10%;
margin-left: 5%;
        margin-right: 5%;
    }

    .blog-title {
        font-family: 'Playfair Display', serif;
        font-size: clamp(1.8rem, 5vw, 3rem);
        font-weight: 700;
        letter-spacing: 1px;
    }

    .comment-div {
        max-width: 800px;
       margin-left: 5%;
        margin-right: 5%;

    }

    .comment-form {
        display: flex;
        flex-direction: column;
        gap: 10px;
        align-items: stretch;
    }

    .my-form {
        display: flex;
        gap: 10px;
    }

    .comment-strip {
        border-bottom: 1px solid #e6e6e6;
        padding-bottom: 12px;
    }

    .comment-strip img {
        border-radius: 50%;
    }

    .comment-strip div:last-child {
        font-size: clamp(0.95rem, 2.5vw, 1.05rem);
        line-height: 1.6;
        margin-top: 6px;
    }

    .blog-cover {
        width: 100%;
        max-width: 750px;
        height: auto;
        display: block;
    }

    .author {
        display: flex;
        gap: 12px;
        align-items: center;
        flex-wrap: wrap;
    }

    .main p {
        font-size: clamp(1rem, 2.5vw, 1.1rem);
        line-height: 1.7;
    }

    @media (min-width: 768px) {
        .comment-form {
            flex-direction: row;
            align-items: center;
        }

        .main,
        .comment-div {
            margin: 80px;
        }
    }
</style>

<body>
    <%- include('./partials/script') %>
        <%- include('./partials/nav') %>

            <div class="main">

                <div class="blog-title">
                    <%= blog.title %>
                </div>

                <img src="<%= blog.coverImage %>" class="blog-cover mb-5 mt-5">

                <div class="author p-2 mb-2">
                    <img src="<%= blog.createdBy.profilePicture %>" width="45px">
                    <%= blog.createdBy.fullName %>

                </div>
                <div class="mt-1 mb-3">
                    <%= new Date(blog.createdAt).toLocaleString('en-IN', {hour: '2-digit' ,minute: '2-digit' ,hour12:
                        true,day: '2-digit' ,month: 'short' ,year: 'numeric' }) %>
                </div>
                <p class="pt-3">
                    <%= blog.body %>
                </p>
            </div>

            <div class="comment-div ">
                <h2>Comments (<%= comments.length %>)</h2>

                <div class="comment-form mt-3">
                    <% if (locals.user) { %>
                        <form action="/blog/comment/<%= blog._id %>" method="post">

                            <div class="my-form">
                                <div class="">
                                    <input type="text" name="content" class="form-control"
                                        placeholder="Enter your Comment" required>
                                </div>
                                <button class="btn btn-primary" type="submit">Add</button>
                            </div>

                        </form>
                        <% } %>
                </div>


                <div class="mt-5">
                    <% comments.forEach(comment=> { %>
                        <div class="mb-4 comment-strip">
                            <div>
                                <img src="<%= comment.createdBy.profilePicture %>" alt="" width="30px">
                                <%= comment.createdBy.fullName %>
                            </div>

                            <div class="mt-1 mb-3">
                                <%= new Date(comment.createdAt).toLocaleString('en-IN', {hour: '2-digit' ,minute: '2-digit'
                                    ,hour12: true,day: '2-digit' ,month: 'short' ,year: 'numeric' }) %>
                            </div>

                            <div>
                                <%= comment.content %>
                            </div>
                        </div>
                        <% }) %>
                </div>


            </div>
</body>

</html>